# 5회차 회의  
> 2025-??-??

## 참여자

### Frontend
- 강명석  

### Backend / Database
- 강명석  

---

## ?월 ??일까지 한 것 및 특이사항

### Frontend

### Backend / Database

---

## 논의사항 Frontend

### OpenGraph 사용
- OpenGraph 라는게 존재합니다. SEO를 위해 존재하는데 사이트의 설명 제목 그리고 썸네일등을 적어놓을 수 있음
- 제공해드리는 예시를 참고할 것
- 썸네일은 일단 임의로 잡으면 됩니다. 

## 논의사항 Backend

### 일단 격려

- 제가 운영진과 접촉하는 데 성공함 프로젝트 성공에 더 가까워짐과 동시에 고칠 부분이 많이 생겼어요.
- 이번주 할일이 꽤 많을 수 있습니다. **반드시** 미리 시작해야할겁니다. 그리고 높은 확률로 민기님은 이번주에 한경님은 다음주에 막히는 부분이 생길건데, 부담스러워하지 말고 저를 부르세요.
- 여러분의 개발력은 일단 엥간한 1학년들은 다 쌉바르고 고학년 몇몇보다도 우수합니다 자랑스러워하십쇼. 컴공 4학년에도 github 쓸 줄 모르는 경우 있음  

### Discord Bot의 Specification

- 봇의 기능은 기능정의서를 참고하십쇼
- 이 외에도 본인이 필요하다고 생각하는 기능을 구현해주면 매우 고맙겠다
- 앞전에서도 말했었지만, 패키지처럼 사용할 수 있었으면 좋겠음.
- Thread 분리해서 async, 코루틴 같은거 쓰면 구현할 수 있음.  
- 공부를 좀 해야할 것  
- [관련 GPT 대화](https://chatgpt.com/share/683a7381-9a6c-8009-a643-e71dd4e1e120) 를 참고

### control 폴더를 만들자

컨트롤러 만드는 이유
- 지금까지의 api 요청은 거의 대부분 DB 껍데기
- 그러나 create suite 처럼 그렇지 않은 요청이 생기고 있음
- 저럼 복잡한 요청 처리들을 그냥 route 에다가 때려박으면 후일 유지보수팀이 힘들어 할 것

무엇을 작성할건가
- 여러 DB를 종합적으로 다루어야 하는 요청 (create sig suite, 전역 시그 상태 수정)
- 또는 여러러 DB를 다루지는 않지만, 중요한 요청 (sig 생성, pig 생성, 게시판 생성)

### route, model을 합치자

- 현재 route 와 model 들에서 파일 분리가 되어있는 것으로 알고 있음.
- 파일 분리 자체는 좋은데, 성격이 비슷한 몇은 파일을 합치는게 좋아보임. 가독성이 조금 떨어지고 import 경로가 많아진다
- file(image, document) / article(board, article) / sigpig(sig, pig) / user(user) 정도 합치면 좋을 것 같다

### 유저 권한의 (조금 큰) 변경

- 운영진과 접촉하는 데 (드디어) 성공함
- 이에 따라 유저 권한에 꽤나 큰 변화가 생겼음. 뭐 긍정적으로 생각하면 배포에 더 가까워지는거라고 생각하자
- role의 종류를 늘릴거임. `newcomer`, `member`, `OB`, `executive`, `president`로 변경.
- 각각 준회원, 정회원, OB, 임원진, 회장단으로 대표되며 영문이름을 임의로 바꿔도 됨.
- 가입 시 준회원으로 가입.
- 한 학기가 지나면 status가 pending이 되는데, 이 상태에서 등록하면 role을 정회원으로 설정
- 정회원이 다음 학기에 OB가 되겠다는 선언을 할 수 있어야 하는데... OB 구현은 일단 다음주에 하자

### 유저 로그인 로직의 (조금 큰) 변경

- 현재 벡엔드 서버를 내부 서버처럼 사용하려고 함
- 내부 서버처럼 사용하려는 이유는, 일단 Next.js에서도 서버 기능을 조금 돌릴 수 있는 데다가 server side call이 훨씬 안전하기 때문
- 따라서, 현재의 벡엔드 서버는 유저 session 굳이 확인 안 할거임 session 처리는 프론트 서버에서 알아서 해라
- 그리고, 유저 인식이 필요한 모든 요청은 별도의 user 항목을 받게 하고, 그걸 믿을거임 (이게 안전한 이유는 front secret이 있으니까)
- 그리고, 프론트는 이제 유저정보가 요구되는 요청은 client 사이트에서 보내면 안 됨. 무조건 server side
- 그러면 create sig 같은건 어떻게 하느냐? 프론트 서버 내부적으로 api 를 거치게, 그 프론트 서버 api에서 벡엔드 api를 호출하면 됨 

---

## ?월 ??일까지 할 것

**이한경**
- **리펙토링**
- 단순한 create를 삭제하고 /api/sig/create 가 create suite역할을 담당하도록 변경
- 시그 생성 로직, 전역 시그 상태 변경 로직 그리고 유저 생성로직을 control로 옮기기
- /user/create에 더불어 /user/enroll 을 만들자. 이 api는 기존회원의 새학기 등록. pending 이었던 회원 상태를 active로 바꿈.  
- route와 model에서 파일들 합쳐서 sigpig, user, file 파일 만들기.
- **구조변경**
- 권한 저장형태를 정수로 바꾸기
- `유저 권한의 (조금 큰) 변경` 적용하기.
- `유저 로그인 로직의 (조금 큰) 변경` 적용하기. 벡엔드 서버에 이제 로그인된 유저 따위는 없다. 프론트한테 user 값 보내게 한 다음 그 값을 믿을거임

**황민기**
- route와 model에서 파일들 합쳐서 article 파일 만들기.
- `Discord Bot의 Specification` 구현하기
- [관련 GPT 대화](https://chatgpt.com/share/683a7381-9a6c-8009-a643-e71dd4e1e120) 를 참고
- 일단, bot repository에 패키지로써 봇을 구현해놓고, 나에게 확인받기  
- 그 다음 웹에 바로 이식합시다.  
  
```py
# general
초대 코드 생성
문자열을 특정 채널에 전송
특정인에게 관리자 권한 부여
특정인에게 회장단 권한 부여

# user (이 부분 내가 되는지 확인을 안 해봤는데 안 되면 이야기할 것)
특정 유저에세 새로운 역할을 부여하기
역할에서 특정 유저를 제외하기

# sigpig
시그 생성 기능 (구성원 리스트를 받아와 해당 구성원으로 새로운 그룹을 만들고, 새로운 채널 생성)
시그 아카이브 기능 (시그 이름을 받아 해당 그룹을 삭제하고 채널을 아카이브로 이동)
```

**박성현**
- 모든 페이지 전부 점검해주세요.
- Prettier 적용해주세요.
- 기능정의서 `About Us`이라고 적힌 페이지들 만들기
- 기능정의서 `Contact`이라고 적힌 페이지들 만들기
- 메인페이지에 OpenGraph 만들어주세요

**김재희**
- 카카오톡 봇이 얼마나 구현되었는가? 구현 정도에 따라 생각할 것이 달라질 것
- 일단 비동기 감당 가능한지 확인해보고 감당 될 것 같으면 이야기
