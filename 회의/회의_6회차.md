# 6회차 회의  
> 2025-06-18

## 참여자

### Frontend
- 강명석  

### Backend / Database
- 강명석  

---

## 논의사항

### G-SCSC 도입

- 현재 global sig status 그리고 global pig status가 있는 것으로 알고 있음
- 이걸 G-SCSC 라는 것으로 통합할 것. 자세한 것은 `기능정의서.md` 참조
- 추가로, 바뀔 때 디스코드 봇 로직도 같이 돌아갈 것임. 이것도 기능정의서를 참조하십쇼

### OB 구현  

- G-SCSC와 함께 동작하는 시스템
- `기능정의서.md` 참조  

### 유저 로그인 로직의 (조금 큰) 변경

- **설명**
- 현재 벡엔드 서버를 내부 서버처럼 사용하려고 함
- 내부 서버처럼 사용하려는 이유는, 일단 Next.js에서도 서버 기능을 조금 돌릴 수 있기 때문
- 따라서, 현재의 벡엔드 서버는 session에다가 유저 정보 안 넣을거임.
- **기술**
- /user/login 에서 user 정보 그리고 jwt 토큰 반환해주세요.  
- 유저 인식이 필요한 모든 요청은 jwt 토큰으로 처리합니다.  
- (userid)와 userhash는 cookie 에 저장해도 됩니다.  
- 그리고 벡엔드에 미들웨어 userauth 같은걸 하나 붙입니다. 여기에서 해시 검증 + user table 조회를 때린 후, 적절한 값들을 request.user 같은데다가 저장해놓습니다.  
- 이제 권한 필요할때마다 request.user.permission_level 때리면 됨. 유저 로그인 여부 필요할때마다 request.user.isvalid 때리면 됨. 간단하죠?  

### enroll 로직 변경
- **설명**
- 로직 변경하겠습니다. 유료인것 까지는 생각을 했는데, 사업자 승인 받아야하는거 생각을 못함  
- 여러모로 공식 api들 가져다 쓰기에는 시간상으로도 규모상으로도 무리라는 판단이 들어서, 완전자동이었던 입금확인을 반자동으로 바꾸기로 했고, 임원진들한테 가서 승인도 받아왔어요
- 장점이러면 API 안 써도 됨
- **기술**
- 유저 status에 `pending`과 함께 `standby`를 만드려고 합니다. `pending`은 입금 안 한 회원, `stanby`는 입금은 했으나 입금확인은 되지 않은 회원이에요. 둘을 굳이 불리하는 이유는 `pending`인 유저라고 싹 다 입금을 하는 게 아닐거기 때문.
- 또한, 별도의 테이블을 만들어서 (standbyUser - requestTime - isChecked) 이 셋을 저장하려고 합니다. 이 셋을 굳이 별도로 저장하는 이유는 **돈 문제니까**.  
- /user/enroll -  유저가 `pending` 상태인지 확인하고 `pending` 상태라면 `standby`로 바꿉니다. 마찬가지로 `controller/user` 모듈에 enroll_user_controller가 있으면 좋겠어요.
- /user/

---

## 6월 20일까지 할 것

**박성현**
- `유저 로그인 로직의 (조금 큰) 변경` 적용하기. 로그인 시 user id 값 가져오고 적절히 해시 후 cookie든  localstorage이든 저장. (개인적으로 localstorage ㅊㅊ)  
- 현재 components에 있는 모든 .tsx 파일 전부 정리해주세요. 전부 정리해주시고 지금 쓰는 건 이게 반드시 있어야 하는 이유를 파일 상단에 주석으로 기재하고, .jsx로 리팩토링 해주세요.

**황민기**
- 5회차 내용 이어서

**이한경**

